# Claude Code Prompt Engineering Guide

## 核心原则

### 1. 清晰的角色定位

**❌ 模糊:**
```
写个Python脚本
```

**✅ 清晰:**
```
你是专业的Python开发工程师。
创建一个脚本来自动化文件整理。
```

### 2. 明确的任务描述

**❌ 模糊:**
```
做个游戏
```

**✅ 清晰:**
```
创建一个2D canvas游戏：
- 粉色小球跟随鼠标移动
- 收集黄色食物球得分
- 顶部显示得分
- 单HTML文件，直接打开
```

### 3. 具体的技术要求

**❌ 无要求:**
```
写个网页
```

**✅ 具体:**
```
使用技术：
- HTML5 Canvas
- 经典JavaScript（非ES模块）
- 单HTML文件，直接双击打开
- Three.js r128（如果需要3D）
```

### 4. 清晰的输出格式

**❌ 无格式:**
```
写个HTML
```

**✅ 有格式:**
```
直接输出HTML代码：
- 不要markdown代码块标记
- 不要解释说明
- 不要额外文本
- 只输出纯HTML代码
```

## 实用模板

### 代码生成

```markdown
你是专业的[技术栈]开发工程师。

任务：[任务描述]

技术要求：
1. [具体要求1]
2. [具体要求2]

代码规范：
- 函数不超过50行
- 变量命名清晰
- 中文注释

文件保存到：[路径]

直接输出代码，不要markdown格式。
```

### 代码审查

```markdown
审查以下代码的[性能/安全性/可维护性]：

[代码或文件路径]

请指出问题并给出改进建议。
```

### 调试

```markdown
修复以下错误：

[错误信息]

相关代码：[文件路径或代码片段]

请分析原因并提供修复方案。
```

## 进阶技巧

### 1. 提供上下文

```bash
# 包含文件
./run.sh "添加用户认证功能" --file user_controller.py

# 包含项目结构
./run.sh "这个项目是做什么的？列出主要文件"
```

### 2. 迭代式开发

```bash
# 第一步
./run.sh "创建一个基础的Flask应用结构"

# 第二步（继续）
./run.sh "添加用户认证模块" --continue

# 第三步（继续）
./run.sh "添加数据库模型" --continue
```

### 3. 指定模型

```bash
# 简单任务用haiku
./run.sh "写个简单的HTML hello world" --model haiku

# 复杂任务用opus
./run.sh "设计一个复杂的系统架构" --model opus

# 一般任务用sonnet（默认）
./run.sh "创建一个游戏"
```

## 常见问题

### Q: CC生成太慢？

**A:** 
1. 简化需求
2. 使用更简单的任务描述
3. 用 `--model haiku` 快速模式

### Q: 代码有bug？

**A:**
1. 让CC修复：`./run.sh "修复这个bug" --file buggy.py`
2. 提供具体错误信息
3. 要求添加错误处理

### Q: 输出格式不对？

**A:** 在prompt中明确指定：
```
直接输出代码，不要markdown格式，不要代码块标记。
```

## 最佳实践清单

- [ ] 角色定位清晰
- [ ] 任务描述具体
- [ ] 技术要求明确
- [ ] 输出格式指定
- [ ] 包含相关文件
- [ ] 代码规范约束
- [ ] 测试验证结果
